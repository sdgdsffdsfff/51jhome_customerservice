(function(global,document,undefined){var AlertifyProto=(function(){var AlertifyProto,add,attach;add=function(){this.on=function(el,event,fn){el.addEventListener(event,fn,false)};this.off=function(el,event,fn){el.removeEventListener(event,fn,false)}};attach=function(){this.on=function(el,event,fn){el.attachEvent("on"+event,fn)};this.off=function(el,event,fn){el.detachEvent("on"+event,fn)}};AlertifyProto={_version:"0.4.0",_prefix:"alertify",get:function(id){return document.getElementById(id)},on:function(el,event,fn){if(typeof el.addEventListener==="function"){el.addEventListener(event,fn,false);add.call(this)}else if(el.attachEvent){el.attachEvent("on"+event,fn);attach.call(this)}},off:function(el,event,fn){if(typeof el.removeEventListener==="function"){el.removeEventListener(event,fn,false);add.call(this)}else if(el.detachEvent){el.detachEvent("on"+event,fn);attach.call(this)}}};return AlertifyProto}());var Alertify=(function(){var Alertify=function(){};Alertify.prototype=AlertifyProto;Alertify=new Alertify();return Alertify}());var validate=(function(){var _checkValidation,validate;_checkValidation=function(type,param,optional){var valid=false;if(optional&&typeof param==="undefined"){valid=true}else{if(type==="object"){valid=(typeof param==="object"&&!(param instanceof Array))}else{valid=(typeof param===type)}}return valid};validate={messages:{invalidArguments:"Invalid arguments"},isFunction:function(param,optional){return _checkValidation("function",param,optional)},isNumber:function(param,optional){return _checkValidation("number",param,optional)},isObject:function(param,optional){return _checkValidation("object",param,optional)},isString:function(param,optional){return _checkValidation("string",param,optional)},};return validate}());var element=(function(){var element={},setAttributes;setAttributes=function(el,params){var k;if(!validate.isObject(el)||!validate.isObject(params,true)){throw new Error(validate.messages.invalidArguments);}if(typeof params!=="undefined"){if(params.attributes){for(k in params.attributes){if(params.attributes.hasOwnProperty(k)){el.setAttribute(k,params.attributes[k])}}}if(params.classes){el.className=params.classes}}return el};element={create:function(type,params){var el;if(!validate.isString(type)||!validate.isObject(params,true)){throw new Error(validate.messages.invalidArguments);}el=document.createElement(type);el=setAttributes(el,params);return el},ready:function(el){if(!validate.isObject(el)){throw new Error(validate.messages.invalidArguments);}if(el&&el.scrollTop!==null){return}else{this.ready()}}};return element}());var transition=(function(){var transition;transition=function(){var t,type,supported=false,el=element.create("fakeelement"),transitions={"WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"otransitionend","transition":"transitionend"};for(t in transitions){if(el.style[t]!==undefined){type=transitions[t];supported=true;break}}return{type:type,supported:supported}};return transition()}());var keys=(function(){var keys={ENTER:13,ESC:27,SPACE:32};return keys}());var Dialog=(function(){var dialog,_dialog={};var Dialog=function(){var controls={},dialog={},isOpen=false,queue=[],tpl={},prefixEl=Alertify._prefix+"-dialog",prefixCover=Alertify._prefix+"-cover",clsElShow=prefixEl+" is-"+prefixEl+"-showing",clsElHide=prefixEl+" is-"+prefixEl+"-hidden",clsCoverShow=prefixCover+" is-"+prefixCover+"-showing",clsCoverHide=prefixCover+" is-"+prefixCover+"-hidden",elCallee,$,appendBtns,addListeners,build,hide,init,onBtnCancel,onBtnOK,onBtnResetFocus,onFormSubmit,onKeyUp,open,removeListeners,setFocus,setup;tpl={buttons:{holder:"<nav class=\"alertify-buttons\">{{buttons}}</nav>",submit:"<button role=\"button\" type=\"submit\" class=\"alertify-button alertify-button-ok\" id=\"alertify-ok\">{{ok}}</button>",ok:"<button role=\"button\" type=\"button\" class=\"alertify-button alertify-button-ok\" id=\"alertify-ok\">{{ok}}</button>",share:"<button role=\"button\" type=\"button\" class=\"alertify-button alertify-button-share\" id=\"alertify-share\">{{share}}</button>",cancel:"<button role=\"button\" type=\"button\" class=\"alertify-button alertify-button-cancel\" id=\"alertify-cancel\">{{cancel}}</button>"},input:"<div class=\"alertify-text-wrapper\"><input type=\"text\" class=\"alertify-text\" id=\"alertify-text\"></div>",message:"<p class=\"alertify-message\">{{message}}</p>",title:'<p class="alertify-title">{{title}}</p>',log:"<article class=\"alertify-log{{class}}\">{{message}}</article>"};addListeners=function(item){onBtnOK=function(event){var val="";if(typeof event.preventDefault!=="undefined"){event.preventDefault()}removeListeners();hide();if(controls.input){val=controls.input.value}if(typeof item.accept==="function"){if(controls.input){item.accept(val)}else{item.accept()}}return false};onBtnCancel=function(event){if(typeof event.preventDefault!=="undefined"){event.preventDefault()}removeListeners();hide();if(typeof item.deny==="function"){item.deny()}return false};onBtnShare=function(event){if(typeof event.preventDefault!=="undefined"){event.preventDefault()}removeListeners();hide();if(typeof item.shareFun==="function"){item.shareFun()}return false};onKeyUp=function(event){var keyCode=event.keyCode;if(keyCode===keys.SPACE&&!controls.input){onBtnOK(event)}if(keyCode===keys.ESC&&controls.cancel){onBtnCancel(event)}};onBtnResetFocus=function(event){if(controls.input){controls.input.focus()}else if(controls.cancel){controls.cancel.focus()}else{controls.ok.focus()}};Alertify.on(controls.reset,"focus",onBtnResetFocus);if(controls.ok){Alertify.on(controls.ok,"click",onBtnOK)}if(controls.shareFun){Alertify.on(controls.shareFun,"click",onBtnShare)}if(controls.cancel){Alertify.on(controls.cancel,"click",onBtnCancel)}Alertify.on(document.body,"keyup",onKeyUp);if(controls.form){Alertify.on(controls.form,"submit",onBtnOK)}if(!transition.supported){setFocus()}};appendBtns=function(secondary,primary){return dialog.buttonReverse?primary+secondary:secondary+primary};build=function(item){var html="",type=item.type,message=item.message;title=item.title;html+="<div class=\"alertify-dialog-inner\">";if(dialog.buttonFocus==="none"){html+="<a href=\"javascript:;\" id=\"alertify-noneFocus\" class=\"alertify-hidden\"></a>"}if(type==="prompt"){html+="<form id=\"alertify-form\">"}html+="<article class=\"alertify-inner\">";html+=title?tpl.title.replace("{{title}}",title):'';html+=tpl.message.replace("{{message}}",message);if(type==="prompt"){html+=tpl.input}html+=tpl.buttons.holder;html+="</article>";if(type==="prompt"){html+="</form>"}html+="<a id=\"alertify-resetFocus\" class=\"alertify-resetFocus\" href=\"javascript:;\">Reset Focus</a>";html+="</div>";switch(type){case"confirm":html=html.replace("{{buttons}}",appendBtns(tpl.buttons.ok,tpl.buttons.cancel));html=html.replace("{{ok}}",dialog.labels.ok).replace("{{cancel}}",dialog.labels.cancel);break;case"prompt":html=html.replace("{{buttons}}",appendBtns(tpl.buttons.submit,tpl.buttons.cancel));html=html.replace("{{ok}}",dialog.labels.ok).replace("{{cancel}}",dialog.labels.cancel);break;case"alert":html=html.replace("{{buttons}}",tpl.buttons.ok);html=html.replace("{{ok}}",dialog.labels.ok);break;case"share":var btn=appendBtns(tpl.buttons.ok,tpl.buttons.share)+tpl.buttons.cancel;html=html.replace("{{buttons}}",btn);html=html.replace("{{ok}}",dialog.labels.ok).replace("{{share}}",dialog.labels.shareText).replace("{{cancel}}",dialog.labels.cancel);break}return html};hide=function(){var transitionDone;queue.splice(0,1);if(queue.length>0){open(true)}else{isOpen=false;transitionDone=function(event){event.stopPropagation();Alertify.off(this,transition.type,transitionDone)};if(transition.supported){Alertify.on(dialog.el,transition.type,transitionDone);dialog.el.className=clsElHide}else{dialog.el.className=clsElHide}dialog.cover.className=clsCoverHide;elCallee.focus()}};init=function(){var cover=element.create("div",{classes:clsCoverHide}),el=element.create("section",{classes:clsElHide});document.body.appendChild(cover);document.body.appendChild(el);element.ready(cover);element.ready(el);dialog.cover=cover;return el};open=function(fromQueue){var item=queue[0],onTransitionEnd;isOpen=true;onTransitionEnd=function(event){event.stopPropagation();Alertify.off(this,transition.type,onTransitionEnd)};if(transition.supported&&!fromQueue){Alertify.on(dialog.el,transition.type,onTransitionEnd)}dialog.el.innerHTML=build(item);dialog.cover.className=clsCoverShow;dialog.el.className=clsElShow;controls.reset=Alertify.get("alertify-resetFocus");controls.ok=Alertify.get("alertify-ok")||undefined;controls.cancel=Alertify.get("alertify-cancel")||undefined;controls.focus=(dialog.buttonFocus==="cancel"&&controls.cancel)?controls.cancel:((dialog.buttonFocus==="none")?Alertify.get("alertify-noneFocus"):controls.ok),controls.input=Alertify.get("alertify-text")||undefined;controls.form=Alertify.get("alertify-form")||undefined;controls.shareFun=Alertify.get("alertify-share")||undefined;if(typeof item.placeholder==="string"&&item.placeholder!==""){controls.input.placeholder=item.placeholder}if(fromQueue){setFocus()}addListeners(item)};removeListeners=function(){Alertify.off(document.body,"keyup",onKeyUp);Alertify.off(controls.reset,"focus",onBtnResetFocus);if(controls.input){Alertify.off(controls.form,"submit",onFormSubmit)}if(controls.ok){Alertify.off(controls.ok,"click",onBtnOK)}if(controls.cancel){Alertify.off(controls.cancel,"click",onBtnCancel)}};setFocus=function(){if(controls.input){controls.input.focus();controls.input.select()}else{controls.focus.focus()}};setup=function(type,msg,title,accept,deny,placeholder,shareFun){if(!validate.isString(type)||!validate.isString(msg)||!validate.isString(title)||!validate.isFunction(accept,true)||!validate.isFunction(deny,true)||!validate.isString(placeholder,true)||!validate.isFunction(shareFun,true)){throw new Error(validate.messages.invalidArguments);}dialog.el=dialog.el||init();elCallee=document.activeElement;queue.push({type:type,title:title,message:msg,accept:accept,deny:deny,placeholder:placeholder,shareFun:shareFun});if(!isOpen){open()}};return{buttonFocus:"ok",buttonReverse:false,cover:undefined,el:undefined,labels:{ok:"\u786e\u5b9a",cancel:"\u53d6\u6d88",shareText:"\u5206\u4eab"},alert:function(msg,title,accept){dialog=this;setup("alert",msg,title,accept);return this},confirm:function(msg,title,accept,deny){dialog=this;setup("confirm",msg,title,accept,deny);return this},prompt:function(msg,title,accept,deny,placeholder){dialog=this;setup("prompt",msg,title,accept,deny,placeholder);return this},share:function(msg,title,accept,deny,placeholder,shareFun){dialog=this;setup("share",msg,title,accept,deny,placeholder,shareFun);return this}}};return new Dialog()}());var Log=(function(){var Log,onTransitionEnd,remove,startTimer,prefix=Alertify._prefix+"-log",clsShow=prefix+" is-"+prefix+"-showing",clsHide=prefix+" is-"+prefix+"-hidden";Log=function(parent,type,msg,delay){if(!validate.isObject(parent)||!validate.isString(type)||!validate.isString(msg)||!validate.isNumber(delay,true)){throw new Error(validate.messages.invalidArguments);}this.delay=(typeof delay!=="undefined")?delay:5000;this.msg=msg;this.parent=parent;this.type=type;this.create();this.show()};onTransitionEnd=function(event){event.stopPropagation();if(typeof this.el!=="undefined"){Alertify.off(this.el,transition.type,this.fn);remove.call(this)}};remove=function(){this.parent.removeChild(this.el);delete this.el};startTimer=function(){var that=this;if(this.delay!==0){setTimeout(function(){that.close()},this.delay)}};Log.prototype.close=function(){var that=this;if(typeof this.el!=="undefined"&&this.el.parentNode===this.parent){if(transition.supported){this.fn=function(event){onTransitionEnd.call(that,event)};Alertify.on(this.el,transition.type,this.fn);this.el.className=clsHide+" "+prefix+"-"+this.type}else{remove.call(this)}}};Log.prototype.create=function(){if(typeof this.el==="undefined"){var el=element.create("article",{classes:clsHide+" "+prefix+"-"+this.type});el.innerHTML=this.msg;this.parent.appendChild(el);element.ready(el);this.el=el}};Log.prototype.show=function(){var that=this;if(typeof this.el==="undefined"){return}Alertify.on(this.el,"click",function(){that.close()});this.el.className=clsShow+" "+prefix+"-"+this.type;startTimer.call(this)};return Log}());var logs=(function(){var init,createLog,validateParams,logs;init=function(){var el=element.create("section",{classes:Alertify._prefix+"-logs"});document.body.appendChild(el);element.ready(el);return el};createLog=function(type,msg,delay){validateParams(type,msg,delay);this.el=this.el||init();return new Log(this.el,type,msg,delay)};validateParams=function(type,msg,delay){if(!validate.isString(type)||!validate.isString(msg)||!validate.isNumber(delay,true)){throw new Error(validate.messages.invalidArguments);}};logs={delay:5000,el:undefined,create:function(type,msg,delay){return createLog.call(this,type,msg,delay)},error:function(msg,delay){return createLog.call(this,"error",msg,delay)},info:function(msg,delay){return createLog.call(this,"info",msg,delay)},success:function(msg,delay){return createLog.call(this,"success",msg,delay)}};return logs}());Alertify.dialog=Dialog;Alertify.log=logs;window.Alertify=Alertify})(this,document);
Msg={};
Msg.alert=function(c,t,ok){t=t||'\u63d0\u793a\u4fe1\u606f';return Alertify.dialog.alert(c,t,ok);};
Msg.confirm=function(c,t,ok,error){return Alertify.dialog.confirm(c,t,ok,error);};
Msg.prompt=function(c,t,ok,error,value){return Alertify.dialog.prompt(c,t,ok,error,value);};
Msg.share=function(c,t,ok,share,error){return Alertify.dialog.share(c,t,ok,error,'',share);};
Msg.setText=function(ok,cancel,shre){return Alertify.dialog.labels={ok:ok||'\u786e\u5b9a',cancel:cancel||'\u53d6\u6d88',shareText :shre||'\u5206\u4eab'}};





