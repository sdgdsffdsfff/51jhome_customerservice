var smiley = {};
smiley.s1 = {
	'title': '\u9ed8\u8ba4', //默认
	'icon': {
		'[\u5fae\u7b11]': 'smiley/e100.gif',
		'[撇嘴]': 'smiley/e101.gif',
		'[色]': 'smiley/e102.gif',
		'[发呆]': 'smiley/e103.gif',
		'[得意]': 'smiley/e104.gif',
		'[流泪]': 'smiley/e105.gif',
		'[害羞]': 'smiley/e106.gif',
		'[闭嘴]': 'smiley/e107.gif',
		'[睡]': 'smiley/e108.gif',
		'[大哭]': 'smiley/e109.gif',
		'[尴尬]': 'smiley/e110.gif',
		'[发怒]': 'smiley/e111.gif',
		'[调皮]': 'smiley/e112.gif',
		'[呲牙]': 'smiley/e113.gif',
		'[惊讶]': 'smiley/e114.gif',
		'[难过]': 'smiley/e115.gif',
		'[酷]': 'smiley/e116.gif',
		'[冷汗]': 'smiley/e117.gif',
		'[抓狂]': 'smiley/e118.gif',
		'[吐]': 'smiley/e119.gif',
		'[偷笑]': 'smiley/e120.gif',
		'[可爱]': 'smiley/e121.gif',
		'[白眼]': 'smiley/e122.gif',
		'[傲慢]': 'smiley/e123.gif',
		'[饥饿]': 'smiley/e124.gif',
		'[困]': 'smiley/e125.gif',
		'[惊恐]': 'smiley/e126.gif',
		'[流汗]': 'smiley/e127.gif',
		'[憨笑]': 'smiley/e128.gif',
		'[大兵]': 'smiley/e129.gif',
		'[奋斗]': 'smiley/e130.gif',
		'[咒骂]': 'smiley/e131.gif',
		'[疑问]': 'smiley/e132.gif',
		'[嘘..]': 'smiley/e133.gif',
		'[晕]': 'smiley/e134.gif',
		'[折磨]': 'smiley/e135.gif',
		'[衰]': 'smiley/e136.gif',
		'[骷髅]': 'smiley/e137.gif',
		'[敲打]': 'smiley/e138.gif',
		'[再见]': 'smiley/e139.gif',
		'[擦汗]': 'smiley/e140.gif',
		'[抠鼻]': 'smiley/e141.gif',
		'[鼓掌]': 'smiley/e142gif',
		'[溴大了]': 'smiley/e143.gif',
		'[坏笑]': 'smiley/e144.gif',
		'[左哼哼]': 'smiley/e145.gif',
		'[右哼哼]': 'smiley/e146.gif',
		'[哈欠]': 'smiley/e147.gif',
		'[鄙视]': 'smiley/e148.gif',
		'[委屈]': 'smiley/e149.gif',
		'[快哭了]': 'smiley/e150.gif',
		'[阴险]': 'smiley/e151.gif',
		'[亲亲]': 'smiley/e152.gif',
		'[吓]': 'smiley/e153.gif',
		'[可怜]': 'smiley/e154.gif',
		'[菜刀]': 'smiley/e155.gif',
		'[西瓜]': 'smiley/e156.gif',
		'[啤酒]': 'smiley/e157.gif',
		'[篮球]': 'smiley/e158.gif',
		'[乒乓]': 'smiley/e159.gif',
		'[咖啡]': 'smiley/e160.gif',
		'[饭]': 'smiley/e161.gif',
		'[猪头]': 'smiley/e162.gif',
		'[玫瑰]': 'smiley/e163.gif',
		'[凋谢]': 'smiley/e164.gif',
		'[示爱]': 'smiley/e165.gif',
		'[[爱心]': 'smiley/e166.gif',
		'[心碎]': 'smiley/e167gif',
		'[蛋糕]': 'smiley/e168.gif',
		'[闪电]': 'smiley/e169.gif',
		'[炸弹]': 'smiley/e170.gif',
		'[刀]': 'smiley/e171.gif',
		'[足球]': 'smiley/e172.gif',
		'[瓢虫]': 'smiley/e173.gif',
		'[便便]': 'smiley/e174.gif',
		'[月亮]': 'smiley/e175.gif',
		'[太阳]': 'smiley/e176.gif',
		'[礼物]': 'smiley/e177.gif',
		'[拥抱]': 'smiley/e178.gif',
		'[强]': 'smiley/e179.gif',
		'[弱]': 'smiley/e180.gif',
		'[握手]': 'smiley/e181.gif',
		'[胜利]': 'smiley/e182.gif',
		'[抱拳]': 'smiley/e183.gif',
		'[勾引]': 'smiley/e184.gif',
		'[拳头]': 'smiley/e185.gif',
		'[差劲]': 'smiley/e186.gif',
		'[爱你]': 'smiley/e187.gif',
		'[NO]': 'smiley/e188.gif',
		'[OK]': 'smiley/e189.gif',
		'[爱情]': 'smiley/e190.gif',
		'[飞吻]': 'smiley/e191.gif',
		'[跳跳]': 'smiley/e192.gif',
		'[发抖]': 'smiley/e193.gif',
		'[怄火]': 'smiley/e194.gif',
		'[转圈]': 'smiley/e195.gif',
		'[磕头]': 'smiley/e196.gif',
		'[回头]': 'smiley/e197.gif',
		'[跳绳]': 'smiley/e198.gif',
		'[挥手]': 'smiley/e199.gif'
	},
	'ulClass': 'expreConNew',
	'liClass': 'bg',
	'perPage': 20,
	'delBtn': true,
	'minPx': '36',
	'minYPx': '32'
};
smileyObj = {
	init: function(reInit) {
		if (!reInit && window.expreInit == true) {
			return;
		}
		window.expreInit = true;
		window.expreConTab = 0;
		var enabledSmiley = window.enabledSmiley || '';
		var siteSmiley = enabledSmiley.split('|');
		var smileyLen = siteSmiley.length;
		if (enabledSmiley === '' || smileyLen < 1) {
			siteSmiley = [1];
		}
		var cate = [],
			emo = [],
			minPx = [],
			minYPx = [];
		for (var i = 0; i < siteSmiley.length; ++i) {
			var key = 's' + siteSmiley[i];
			if (typeof smiley[key] == 'undefined') {
				continue;
			}
			minPx.push(smiley[key]['minPx']);
			minYPx.push(smiley[key]['minYPx']);
			cate.push(smiley[key]['title']);
			emo.push(smiley[key]);
		}
		var html = template.render('tmpl_expreBox', {
			'cate': cate,
			'emo': emo
		});
		if ($(".tipLayer").size() > 0) {
			$(".tipLayer").append(html);
			$('.expreCon li').css('background-position', 'center center');
		} else if ($("#replyForm").size() > 0) {
			html = "<div class=\"tipLayer mt10\" style=\"display:none\">" + html + "</div>";
			$("#replyForm").append(html);
			$('.expreCon li').css('background-size', '256px auto');
			var minPxLen = minPx.length;
			for (var i = 0; i < minPxLen; ++i) {
				$('#exp_emo' + i + ' li a').css({
					'margin': '0',
					width: minPx[i] + 'px',
					height: minYPx[i] + 'px'
				});
			}
			$('.expreCon li').height('97');
			$('.expreCon li').width('256');
			$('.expreBox').width('256');
			$('.expreCon li').css('background-position', 'center center');
		} else {
			return;
		}
		$('.expreList .expressionTab a').on('click', function() {
			var obj = $(this);
			$('.expreList .expressionTab a').removeClass('on');
			obj.addClass('on');
			$('.expreList .expreBox ul').hide();
			$('#exp_' + this.id).show();
			$('.pNumCon').hide();
			$('#exp_' + this.id + '_page').show();
		});
		if (!smileyObj.isInit) {
			new libScroll.initScroll({
				ulSelector: '.expreBox ul',
				isFlip: true,
				cSelector: 'body',
				pageOnClass: 'pNumOn'
			});
			new libScroll.initScroll({
				ulSelector: '.expreList .expressionTab',
				cSelector: 'body',
				childTag: 'a'
			});
			smileyObj.isInit = true;
		}
		libScroll.tabIndex = 0;
		var expreBox = $(".expreList .expreBox ul");
		expreBox.on('click', function(e) {
			return false;
		});
		$.DIC.touchState('.expreList .expreCon li a', 'on');
		$(".expreList .expreCon li a").each(function(i) {
			$(this).on("click", function() {
				var title = $(this).attr("title");
				if ($("#content")) {
					var content = $("#content").val();
					if (!title) {
						if (content && content.lastIndexOf(']') == content.length - 1) {
							var LeftIndex = content.lastIndexOf('[');
							content = content.substring(0, LeftIndex);
						} else {
							content = content.substring(0, content.length - 1);
						}
					} else {
						content = content + title;
					}
					$("#content").val(content);
				}
			});
		});
	},
	show: function() {
		$('.expreSelect').addClass('epOn');
		$('.photoSelect').removeClass('epOn');
		$('.photoList').hide();
		$('.expreList').show();
		$('.tagBox').hide();
		$('.locationCon').hide();
		if ($('#replyForm').size() > 0) {
			$('.tipLayer').show();
		}
	},
	hide: function() {
		if ($('#replyForm').size() > 0) {
			$('.tipLayer').hide();
		}
		$('.expreSelect').removeClass('epOn');
		$('.photoSelect').addClass('epOn');
		$('.expreList').hide();
		$('.photoList').show();
		$('.tagBox').show();
		$('.locationCon').show();
	},
	toggle: function() {
		if ($('.expreList').css('display') == 'none') {
			smileyObj.show();
		} else {
			smileyObj.hide();
		}
	},
	isInit: false
}